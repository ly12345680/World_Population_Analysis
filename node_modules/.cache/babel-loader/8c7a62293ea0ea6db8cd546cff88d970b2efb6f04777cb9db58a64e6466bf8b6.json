{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenhaiharry/Library/CloudStorage/OneDrive-VietNamNationalUniversity-HCMINTERNATIONALUNIVERSITY/Desktop/Sem1_2023-2024/DVDS/World_Population_Analysis/global-population/population-analysis/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { geoOrthographic, geoPath } from 'd3-geo';\nimport { feature } from 'topojson-client';\nimport versor from 'versor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const canvasRef = useRef();\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const width = canvas.width;\n    const height = canvas.height;\n    const projection = geoOrthographic().scale((height - 10) / 2).translate([width / 2, height / 2]).precision(0.1);\n    const path = geoPath().projection(projection).context(context);\n    d3.json('https://unpkg.com/world-atlas@1/world/110m.json').then(world => {\n      const land = feature(world, world.objects.land);\n      d3.drag().on('start', dragstarted).on('drag', dragged)(d3.select(canvas));\n      function dragstarted(event) {\n        this.v0 = versor.cartesian(projection.invert([event.x, event.y]));\n        this.r0 = projection.rotate();\n        this.q0 = versor(this.r0);\n      }\n      function dragged(event) {\n        const v1 = versor.cartesian(projection.rotate(this.r0).invert([event.x, event.y]));\n        const q1 = versor.multiply(this.q0, versor.delta(this.v0, v1));\n        const r1 = versor.rotation(q1);\n        projection.rotate(r1);\n        context.clearRect(0, 0, width, height);\n        context.beginPath();\n        path(land);\n        context.fill();\n      }\n      context.beginPath();\n      path(land);\n      context.fill();\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    width: \"960\",\n    height: \"600\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 10\n  }, this);\n}\n_s(App, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useRef","d3","geoOrthographic","geoPath","feature","versor","jsxDEV","_jsxDEV","App","_s","canvasRef","canvas","current","context","getContext","width","height","projection","scale","translate","precision","path","json","then","world","land","objects","drag","on","dragstarted","dragged","select","event","v0","cartesian","invert","x","y","r0","rotate","q0","v1","q1","multiply","delta","r1","rotation","clearRect","beginPath","fill","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/nguyenhaiharry/Library/CloudStorage/OneDrive-VietNamNationalUniversity-HCMINTERNATIONALUNIVERSITY/Desktop/Sem1_2023-2024/DVDS/World_Population_Analysis/global-population/population-analysis/src/App.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { geoOrthographic, geoPath } from 'd3-geo';\nimport { feature } from 'topojson-client';\nimport versor from 'versor';\n\nfunction App() {\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    const width = canvas.width;\n    const height = canvas.height;\n\n    const projection = geoOrthographic()\n      .scale((height - 10) / 2)\n      .translate([width / 2, height / 2])\n      .precision(0.1);\n\n    const path = geoPath().projection(projection).context(context);\n\n    d3.json('https://unpkg.com/world-atlas@1/world/110m.json').then(world => {\n      const land = feature(world, world.objects.land);\n\n      d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        (d3.select(canvas));\n\n      function dragstarted(event) {\n        this.v0 = versor.cartesian(projection.invert([event.x, event.y]));\n        this.r0 = projection.rotate();\n        this.q0 = versor(this.r0);\n      }\n\n      function dragged(event) {\n        const v1 = versor.cartesian(projection.rotate(this.r0).invert([event.x, event.y]));\n        const q1 = versor.multiply(this.q0, versor.delta(this.v0, v1));\n        const r1 = versor.rotation(q1);\n        projection.rotate(r1);\n        context.clearRect(0, 0, width, height);\n        context.beginPath();\n        path(land);\n        context.fill();\n      }\n\n      context.beginPath();\n      path(land);\n      context.fill();\n    });\n  }, []);\n\n  return <canvas ref={canvasRef} width=\"960\" height=\"600\" />;\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}